<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Carta para Haku â€” 21 de Septiembre</title>
<style>
:root{
  --bg:#FFF9EC;
  --card:#fff;
  --accent:#F6C94A;
  --text:#222;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Inter, system-ui, Arial;
  background: linear-gradient(180deg,var(--bg) 0%, #FFFDF6 60%);
  color:var(--text);
  display:flex;
  align-items:center;
  justify-content:center;
  padding:28px;
  min-height:100vh;
}
.scene{
  width:100%;
  max-width:900px;
  display:grid;
  grid-template-columns:1fr 360px;
  gap:24px;
  align-items:center;
}

/* contenedor flores */
.flowers-wrap{
  background:linear-gradient(180deg, rgba(246,201,74,0.06), rgba(255,250,230,0.08));
  border-radius:18px;
  padding:22px;
  height:420px;
  display:flex;
  align-items:center;
  justify-content:center;
  overflow:hidden;
  box-shadow: 0 8px 30px rgba(20,20,20,0.06);
  position:relative;
}

.flower{
  position:absolute;
  font-size:3rem;
  animation: float 6s ease-in-out infinite;
  opacity:0.9;
  will-change:transform;
}

/* animaciÃ³n de flotaciÃ³n */
@keyframes float{
  0%{transform:translateY(6px) rotate(-5deg)}
  50%{transform:translateY(-10px) rotate(5deg)}
  100%{transform:translateY(6px) rotate(-5deg)}
}

/* flor destacada zoom */
.highlight{
  animation: floatHighlight 4s ease-in-out infinite;
  z-index:2;
}

@keyframes floatHighlight{
  0%{transform: translateY(0) scale(1);}
  50%{transform: translateY(-12px) scale(1.1);}
  100%{transform: translateY(0) scale(1);}
}

/* carta */
.card-wrap{display:flex;flex-direction:column;align-items:center;gap:14px;}
.card{
  width:100%;
  max-width:540px;
  background:var(--card);
  border-radius:14px;
  padding:26px;
  box-shadow: 0 12px 40px rgba(30,30,30,0.07);
  border:1px solid rgba(230,200,80,0.07);
}
.title{display:flex;align-items:center;gap:12px;}
.badge{
  background:var(--accent);
  padding:8px 12px;
  border-radius:999px;
  font-weight:700;
  color:#341f00;
  letter-spacing:0.6px;
  box-shadow: 0 4px 14px rgba(246,201,74,0.12);
}
h1{font-size:20px;margin:0}

.preview{
  margin-top:14px;
  font-size:15px;line-height:1.5;color:#2b2b2b;min-height:76px;
}

.controls{display:flex;gap:10px;margin-top:16px}
button{cursor:pointer;border:0;padding:10px 14px;border-radius:10px;font-weight:600}
.btn-open{background:linear-gradient(90deg,var(--accent), #FFD86B);box-shadow: 0 8px 20px rgba(246,201,74,0.18);color:#341f00}
.btn-reset{background:#fff;border:1px solid rgba(40,40,40,0.06)}

.letter{
  margin-top:18px;display:block;overflow:hidden;border-radius:12px;padding:18px;
  background:linear-gradient(180deg,#fff,#fffaf0);
  border:1px solid rgba(240,220,120,0.12);
  min-height:160px;
}
.typed{white-space:pre-wrap;font-family:'Courier New', monospace;font-size:15px}

@media (max-width:880px){
  .scene{grid-template-columns:1fr;}
  .flowers-wrap{height:240px}
}
</style>
</head>
<body>

<div class="scene">
  <div class="card-wrap">
    <div class="card">
      <div class="title">
        <div class="badge">21 â€¢ Sept</div>
        <h1>ðŸŒ» Carta para Haku â€“ 21 de Septiembre ðŸŒ»</h1>
      </div>
      <div class="preview" id="preview">Hoy es el dÃ­a en que las flores amarillas cobran sentidoâ€¦</div>
      <div class="controls">
        <button class="btn-open" id="openBtn">Abrir carta</button>
      </div>
      <div class="letter" id="letter" aria-hidden="true">
        <div class="typed" id="typed"></div>
      </div>
    </div>
  </div>

  <div class="flowers-wrap" id="flowerField"></div>
</div>

<script>
const letterText = `Haku,

Hoy es el dÃ­a en que las flores amarillas cobran sentido,
porque simbolizan los sueÃ±os compartidos,
la esperanza de lo que vendrÃ¡
y la belleza de lo que ya tenemos.

Y si algo me enseÃ±aste en todo este tiempo,
es que la vida se siente mÃ¡s ligera cuando la camino con vos.
Entre cartas, fuegos artificiales, globos y risas,
aprendÃ­ que no hace falta un motivo grande para celebrarte,
porque vos sos la razÃ³n en sÃ­.

Las flores amarillas no duran para siempre,
pero lo que representan sÃ­ puede hacerlo:
el cariÃ±o, la gratitud, y ese refugio que encuentro en vos.
Vos sos mi lugar seguro,
donde puedo dejar de fingir ser fuerte
y simplemente ser yo.

AsÃ­ que hoy, mÃ¡s que regalarte flores,
quiero regalarte estas palabras:
gracias por existir en mi vida,
gracias por ser esa luz cÃ¡lida que florece incluso en mis inviernos.

ðŸŒ»âœ¨

Con cariÃ±o`;

function typeText(element, text, speed=28){
  element.innerHTML = '';
  let i = 0;
  return new Promise(resolve => {
    function step(){
      if(i < text.length){
        element.innerHTML += text[i] === '\n' ? '<br>' : text[i];
        i++;
        setTimeout(step, speed);
      } else resolve();
    }
    step();
  });
}

function playTypingSound(){
  const audio = new Audio("https://actions.google.com/sounds/v1/office/typewriter.ogg");
  audio.play();
}

function populateFlowers(){
  const field = document.getElementById('flowerField');
  field.innerHTML = '';

  // todas las flores ðŸŒ» grandes
  for(let i=0;i<12;i++){
    let flower = document.createElement("div");
    flower.classList.add("flower");
    flower.innerHTML = "ðŸŒ»";
    flower.style.left = (Math.random()*90)+"%";
    flower.style.top = (Math.random()*80)+"%";
    flower.style.animationDuration = (5+Math.random()*5)+"s";
    field.appendChild(flower);
  }

  // flor destacada con zoom
  let highlight = document.createElement("div");
  highlight.classList.add("flower","highlight");
  highlight.innerHTML = "ðŸŒ»";
  highlight.style.left = "40%";
  highlight.style.top = "30%";
  field.appendChild(highlight);
}

const openBtn = document.getElementById('openBtn');
const resetBtn = document.getElementById('resetBtn');
const typedEl = document.getElementById('typed');
const preview = document.getElementById('preview');
const letterWrap = document.getElementById('letter');
let typedPromise = null;

openBtn.addEventListener('click', async ()=>{
  preview.style.opacity = 0.45;
  letterWrap.setAttribute('aria-hidden','false');
  if(typedPromise) return;
  playTypingSound();
  typedPromise = typeText(typedEl, letterText, 30);
  await typedPromise;
  typedPromise = null;
});

resetBtn.addEventListener('click', ()=>{
  preview.style.opacity = 1;
  typedEl.innerHTML = '';
  letterWrap.setAttribute('aria-hidden','true');
  typedPromise = null;
});

populateFlowers();
</script>

</body>
</html>

